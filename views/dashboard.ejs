<!DOCTYPE HTML>
<html>

<head>
	<title>weAsk</title>
	<meta charset="utf-8" />
	<meta http-equiv="Cache-Control" content="no-store" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="../css/main.css" />
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="icon" href="../images/boat.png" type="image/x-icon">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

	<script>
		$(document).ready(function () {
			$('.ansButton').click(function () {
				$(this).hide();
				var myId = this.id;
				myId += 'ansArea';
				var txtArea = document.getElementById(myId);
				txtArea.style.display = "block";

				myId = this.id;
				myId += 'saveAns';
				console.log(myId);
				var ansButt = document.getElementById(myId);
				ansButt.style.display = "block";
			})

			$('#ques').click(function () {
				$('#story').hide();
				$('#question').show();
			})
			$('#st').click(function () {
				$('#story').show();
				$('#question').hide();
			})
		})
	</script>
</head>

<body>
	<div class="container-fluid" style="width: 100%">
		<div id="page-wrapper">

			<!-- Header -->
			<section id="header" class="wrapper">

				<!-- Logo -->
				<div id="logo">
					<h1><a href="/dashboard" style="text-decoration: none">weAsk</a></h1>
					<p>Hello, <%= username %></p>

				</div>

				<!-- Nav -->
				<nav id="nav">
					<ul>
						<li class="current"><a href="/extras">Extras</a></li>
						<li><a href="/trivia">Trivia</a></li>
						<li><a href="/talktosomeone">Talk to Someone</a></li>
						<li><a href="/profile">Profile</a></li>
						<li><a href="/logout">Logout</a></li>
					</ul>
				</nav>
			</section>
		</div>

		<div class="row">
			<div class="col-md-3">
				<br><br><br>
				<div class="list-group" id="list-tab" role="tablist">
					<a class="list-group-item list-group-item-action active" id="ques" data-toggle="list"
						href="#list-messages" role="tab" aria-controls="messages">Question</a>
					<a class="list-group-item list-group-item-action" id="st" data-toggle="list" href="#list-settings"
						role="tab" aria-controls="settings">Story</a>
				</div>
			</div>
			<div class="col-md-9">
				<form method="POST" action="/posting" id="question">
					<label for="comment" style="font-size: 25px; font-style:oblique">Question:</label>
					<textarea class="form-control" name="question" rows="5" spellcheck="false" required></textarea>
					<br>
					<button id="post">Post</button>
				</form>
				<form method="POST" action="/storyPost" id="story" style="display: none;">
					<label for="comment" style="font-size: 25px; font-style:oblique">Story:</label>
					<input type="text" placeholder="Topic" name="topic" style="color: black;" required>
					<br>
					<textarea class="form-control" name="content" rows="5" spellcheck="false" required></textarea>
					<br>
					<button id="post">Post</button>
				</form>
			</div>
		</div>

		<div class="row">
			<div class="col-md-3">
				<div class="card border-dark mb-3">
					<div class="card-body text-dark" style="text-align: center;">
						<h5 class="card-title"><a href="/story"
								style="text-decoration-color: none; text-decoration:none;">Latest Stories</a></h5>
						<table class="table table-striped" style="text-align: center">
							<tbody>
								<% 
									for(var i=0; i < story.length; i++) { %>
								<tr>
									<td><%= story[i].topic %></td>
								</tr>
								<%}	
								%>
							</tbody>
						</table>
					</div>
				</div>
			</div>

			<div class="col-md-9">
				<div class="allData">
					<% for(var i=0; i < data.length; i++) { %>
					<div class="card border-success mb-3">
						<div class="card-header bg-transparent border-success"><%= data[i].questioner %></div>
						<div class="card-body text-success">
							<h5 class="card-title"><%= data[i].question %></h5>
							<% if(data[i].answer.length > 0){ %>
							<% for(var j=0; j < data[i].answer.length; j++) { %>
							<p><strong><%= data[i].answerer[j] %></strong>:&nbsp;<%= data[i].answer[j] %></p>
							<% }
									%>
							<form method="POST" action="/answering">
								<input style="display: none" type="text" name="questionId" value=<%= data[i]._id %>>
								<textarea style="display: none" class="form-control" name="answer" rows="5"
									spellcheck="false" required id=<%=i%>ansArea></textarea>
								<input style="display: none" type="submit" name="saveButton" value="Save"
									id=<%=i%>saveAns>
							</form>
							<% } else{ %>
							<form method="POST" action="/answering">
								<input style="display: none" type="text" name="questionId" value=<%= data[i]._id %>>
								<textarea style="display: none" class=" form-control" name="answer" rows="5"
									spellcheck="false" required id=<%=i%>ansArea></textarea>
								<input style="display: none" type="submit" name="saveButton" value="Save"
									id=<%=i%>saveAns>
							</form>
							<% } %>
							<button class='ansButton' id=<%=i%>>Write Your Answer</button>
						</div>
					</div>
					<% } %>
				</div>
			</div>
		</div>
	</div>
	<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
		crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
		integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
		crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
		integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
		crossorigin="anonymous"></script>
	<script src="/public/js/main.js"></script>
	<script src="/public/js/script.js"></script>
	<script src="/public/js/util.js"></script>
	<script src="/public/js/breakpoints.min.js"></script>
	<script src="/public/js/browser.min.js"></script>
	<script src="/public/js/jquery.min.js"></script>




</body>

</html>